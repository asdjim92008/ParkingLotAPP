@{
    Layout = "_WebLayout";
}
@section Styles {
    <link rel="stylesheet" href="~/css/ParkingList.css">
}

<table>
    <!-- container -->
    <tr>
        <td>
            <div class="row">
                <table class="cards-list" style="table-layout:fixed;" cellspacing="5">
                    <!-- PLtitle -->
                    <tr>
                        <td colspan="2">
                            <section>
                                <a>
                                    <center>
                                        <div class="companyname" id="companyname">

                                        </div>
                                        <br>
                                        <div id="clock" class="clock">
                                            <script type="text/javascript">
                                                setInterval("setClock()", 1000);//1秒更新一次
                                                function setClock() {
                                                    var date = new Date();
                                                    var today = date.getFullYear() + "年" + (date.getMonth() + 1) + "月" + date.getDate() + "日";
                                                    var timeNow = date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds();
                                                    document.getElementById("clock").innerText = today + "   " + "星期"
                                                        + date.getDay() + "   " + timeNow;
                                                }
                                            </script>
                                        </div>
                                    </center>
                                </a>
                            </section>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <center><div class="textop">停車場列表</div></center>
                        </td>
                    </tr>
                    <!-- PLlist -->
                    <tbody id="PLlist">
                    </tbody>
                </table>
            </div>
        </td>
    </tr>
</table>

<script>
    window.onload = function () {
        let retrievedObject = new Array()
        retrievedObject = JSON.parse(localStorage.getItem('PLdataObject'));
        var text = "<tr>";
        for (var i = 0; i < retrievedObject.data.length; i++) {
            if ((i + 1) % 3 == 0) {
                text += "<td><div class='card'><div class='card_image'><img class='icicon' src='/images/caricon.png' /></div><div class='card_title title-white'><p class='card_p'>" + retrievedObject.data[i].parkingNo + "<br>" + retrievedObject.data[i].parkingName + "</p></div></div></td></tr>";
                text += "<tr>";
            }
            else {
                text += "<td style='height: 122px;'><div class='card'><div class='card_image'><img class='icicon' src='/images/caricon.png' /></div><div class='card_title title-white'><p class='card_p'>" + retrievedObject.data[i].parkingNo + "<br>" + retrievedObject.data[i].parkingName + "</p></div></div></td>";
            }

            if (i == retrievedObject.data.length - 1) {
                text += "</tr><tr>"
                text = text.substring(0, (text.length - 4))
            }
        }
        $("#PLlist").html(text);

        var companyname = retrievedObject.companyName;
        $("#companyname").html(companyname);
    };
</script>